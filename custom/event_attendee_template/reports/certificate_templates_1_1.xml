<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <report
            id="event_certificate_report_template"
            model="event.certificate"
            string="Certificate Gala"
            report_type="qweb-pdf"
            name="event_attendee_template.report_certificate"
            file="event_attendee_template.report_certificate"
            attachment_use="True"
            attachment="(object.name).replace('/','')+'.pdf'"
        />


        <template id="report_certificate_document">
            <div class="page">
      <div class="row text-center">
          <t t-set="company_id" t-value="doc.event_id.company_id"/>
          <t t-if="not company_id">
              <t t-set="company_id" t-value="user.company_id"/>
          </t>
          <t t-set="address" t-value="''"/>
          <t t-if="company_id.street">
              <t t-set="address" t-value="company_id.street"/>
          </t>
          <t t-if="company_id.street2">
              <t t-set="address" t-value="address + ' ' + company_id.street2"/>
          </t>
          <t t-if="company_id.city">
              <t t-set="address" t-value="address + ', ' + company_id.city"/>
          </t>
          <t t-if="company_id.zip">
              <t t-set="address" t-value="address + ' ' + company_id.zip"/>
          </t>

          <p><t t-esc="company_id.name + ' - ' + address"/> IČ: <t t-esc="company_id.company_registry"/></p>
          <p>vzdělávací instituce akreditovaná v systému DVPP MŠMT <t t-esc="company_id.x_acreditation"/></p>

          <div class="mt32">
              <img t-if="company_id.logo" t-att-src="'data:image/png;base64,%s' % company_id.logo" style="height: 80px;"/>
          </div>

          <p class="mt64">Společnost <t t-esc="company_id.name"/> přináší komplexní řešení ICT ve školství v Česku.</p>

          <div class="mt64"/>

          <h1 class="mt64"><strong>OSVĚDČENÍ</strong></h1>

          <div class="mt64"/>
          <h3 class="mt32"><strong><t t-esc="doc.attendee_id.attendee_title"/> <t t-esc="doc.attendee_id.name"/></strong></h3>

          <p class="mt16">Datum narození: <span t-field="doc.attendee_id.attendee_dob" t-field-options="{&quot;format&quot;: &quot;d.M.y&quot;}"/></p>

          <p class="mt64"><strong>Absolvoval(a) dne <span t-field="doc.event_id.date_end" t-field-options="{&quot;format&quot;: &quot;d.M.y&quot;}"/> vzdělávací kurz v délce <t t-esc="'%.0f'%doc.accreditation_id.hours"/> hodin:</strong></p>
          <h2 class="mt64"><strong><t t-esc="doc.accreditation_id.name"/></strong></h2>
              <p><br/>Vzdělávací program byl akreditován MŠMT v rámci systému dalšího vzdělávání pedagogických pracovníků<br/> pod č.j.: <t t-esc="doc.accreditation_id.code"/></p>
              <p><br/>STUDIUM K PROHLUBOVÁNÍ ODBORNÉ KVALIFIKACE</p>

          <div class="mt64"/>

          <br/>
          <br/>
          <br/>
          <br/>
          <br/>


          <div class="col-xs-8 text-left">

              <div class="mt64"/>

              <p><strong>Místo konání: </strong>
                  <t t-esc="doc.event_id.address_id.street"/>
                  <t t-if="doc.event_id.address_id.street2">
                      <t t-esc="doc.event_id.address_id.street2"/>
                  </t>
                  <t t-if="doc.event_id.address_id.city">
                      , <t t-esc="doc.event_id.address_id.city"/>
                  </t>
                  <t t-if="doc.event_id.address_id.zip">
                      <t t-esc="doc.event_id.address_id.zip"/>
                  </t>
              </p>
              <p><strong>Místo a datum vydání osvědčení: </strong>v Praze dne <span t-field="doc.release_date" t-field-options="{&quot;format&quot;: &quot;d.M.y&quot;}"/></p>
              <!--<p><strong>Lektor: </strong><span t-field="doc.event_id.user_id.title"/> <span t-field="doc.event_id.user_id.name"/></p>-->
              <p><strong>Datum zahájení: </strong><t t-esc="time.strftime('%-d.%-m.%Y',time.strptime(events_dict[doc.id]['date_begin'],'%Y-%m-%d'))"/></p>
              <p><strong>Číslo osvědčení: </strong><span t-field="doc.name"/></p>
              <p><strong>Způsob zakončení programu: </strong> Absolvoval(a)</p>
          </div>
                  <t t-if="company_id.id==3">
                   <t t-if="doc.release_date>'2017-08-14'">
          <div class="col-xs-4 text-center">
              <img src="/event_custom_4devnet_bug_fixes/static/src/img/sign3.png" height="160px"/>
              <p class="mt32">Ing. Martin Drábek</p>
              <p>ředitel ITveSkole.cz, o.p.s.</p>
          </div>
                   </t>
                   <t t-if="not doc.release_date>'2017-08-14'">
          <div class="col-xs-4 text-center">
              <img src="/event_custom_4devnet_bug_fixes/static/src/img/sign.png" height="100px"/>
              <p class="mt32">RNDr. Robert Gamba</p>
              <p>ředitel ITveSkole.cz, o.p.s.</p>
          </div>
                   </t>
                  </t>
                  <t t-if="company_id.id==1">
                   <t t-if="doc.release_date>'2017-08-14'">
          <div class="col-xs-4 text-center">
              <img src="/event_custom_4devnet_bug_fixes/static/src/img/sign4.png" height="120px"/>
              <p class="mt32">Ing. Josef Dostál</p>
              <p>jednatel BOXED, s.r.o.</p>
          </div>
                   </t>
                  </t>
      </div>
  </div>
            
        </template>

        <template id="report_certificate">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-call="web.external_layout">
                        <t t-call="event_attendee_template.report_certificate_document" t-lang="doc.attendee_id.partner_id.lang"/>
                    </t>
                </t>
            </t>
        </template>
    </data>
</odoo>
