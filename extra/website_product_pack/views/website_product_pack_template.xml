<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>	
		<template id="assets_frontend" name="website_ribbon_assets_frontend" inherit_id="website.assets_frontend">
			<xpath expr="." position="inside">
		        <link rel="stylesheet" href="/website_product_pack/static/src/css/website_product_pack.css"/>	
		         <script type="text/javascript" src="/website_product_pack/static/src/js/website_pack_product.js"></script>	   
		    </xpath>
		</template>

		<template id="website_product_pack_ribbon_wrapper" inherit_id="website_sale.products_item" name="pack ribbon">
			<xpath expr="//div[@class='o_wsale_product_btn']" position="after" >
				<div class="wk_pack_product_wrapper">
			    	<div class="wk_pack_ribbon">Bundle</div>
			 	 </div>
			</xpath>
			<xpath expr="//div[@class='product_price']/span[@itemprop='priceCurrency']" position="after" >
				<t t-if="product.is_pack == True">
					<t t-set="actual_price" t-value="product.get_actual_product_price(product.id)" />
					<div class="main_div_price_saved">
						<span class="wk_span_save">Save</span>
		                <span t-esc="actual_price" style="white-space: nowrap;" t-esc-options='{
		                     "widget": "monetary",
		                     "from_currency": "website_sale_order.pricelist_id.currency_id",
		                     "display_currency": "user_id.partner_id.property_product_pricelist.currency_id"
		                 }'/>
		            </div>
				</t>
			</xpath>
		</template>

		<template id="website_product_pack_save_price" inherit_id="website_sale.product_price" name="pack_save_price">
			<xpath expr="//div[@itemscope='itemscope']" position="after" >
				<t t-if="product.is_pack == True">
					<t t-set="actual_price" t-value="product.get_actual_product_price(product.id)" />
					<div class="wk_price_save_cart">
						<span class="wk_span_save">Save</span>
			            <span t-esc="actual_price" style="white-space: nowrap;" t-esc-options='{
			                     "widget": "monetary",
			                     "from_currency": "website_sale_order.pricelist_id.currency_id",
			                     "display_currency": "user_id.partner_id.property_product_pricelist.currency_id"}'/>
					</div>
				</t>
			</xpath>
			<xpath expr="//div/h4[hasclass('css_non_editable_mode_hidden')]" position="after" >
				<t t-if="product.is_pack == True">
					<button type="button" class="btn_modal_pack" data-toggle="modal" data-target="#open_products_modal">Bundle Details</button>
			    </t>
				<div id="open_products_modal" class="modal fade" role="dialog">
					<div class="modal-dialog modal-lg">
					   Modal content
						<div class="modal-content">
		        			<button type="button" style="margin-right:5px;margin-top:5px;"  class="btn btn-info pull-right" data-dismiss="modal"> Close</button>
		      				<div class="modal-body" style="clear:both">
			      				<t t-foreach="product.wk_product_pack" t-as="pack">
			  						<div class="wk_modal_outer_div col-md-3">
			  							<t t-set="product_id" t-value="pack.get_product_id(pack.id)"/>
			  							<t t-if="product_id.product_name.website_published == True ">
			      							<div class="image_div">
			      								<a itemprop="url" t-att-href="keep('/shop/product/%s' % slug(product_id.product_name.product_tmpl_id))">
						       					<span  t-field="product_id.wk_image" t-field-options='{"widget": "image", "class": "img-rounded"}'/>
						       					</a>
											</div>
			    							<div class="wk_modal_text">
												<a itemprop="url" t-att-href="keep('/shop/product/%s' % slug(product_id.product_name.product_tmpl_id))">
				    								<span style="display:block;color:#42A5F5;margin-bottom:6pxpx;margin-top:-10px" t-esc="product_id.product_name.name"/>
				    							</a>
				    							Unit Price
												<span t-esc="product_id.product_name.lst_price" class="wk_pack_product_unit_price" t-esc-options='{
									             "widget": "monetary",
									             "from_currency": "website_sale_order.pricelist_id.currency_id",
									             "display_currency": "user_id.partner_id.property_product_pricelist.currency_id"
									         	}'/>
										        <div>
										        	Quantity <span style="margin-left:10px; color:#B71C1C;" t-esc="pack.product_quantity"/>
										    	</div>
			    							</div>
										</t>
										<t t-if="product_id.product_name.website_published == False ">
			      							<div class="image_div" style="opacity:0.3">
					       						<span t-field="product_id.wk_image" t-field-options='{"widget": "image", "class": "img-rounded"}'/>
											</div>
			    							<div class="wk_modal_text">
												<span style="display:block;color:#BBDEFB;margin-bottom:6pxpx;margin-top:-10px" t-esc="product_id.product_name.name"/>
				    							Unit Price
												<span t-esc="product_id.product_name.lst_price" class="wk_pack_product_unit_price" t-esc-options='{
									             "widget": "monetary",
									             "from_currency": "website_sale_order.pricelist_id.currency_id",
									             "display_currency": "user_id.partner_id.property_product_pricelist.currency_id"
									        	 }'/>
										         <div>Quantity
										          <span style="margin-left:10px; color:#B71C1C;" t-esc="pack.product_quantity"/>
										    	</div>
			    							</div>
										</t>
									</div>
								</t>
		     				</div>
		      				<div class="modal-footer">
		      				</div>
					 	</div>
					</div>
				</div>
			</xpath>
	</template>

	</data>
</odoo>